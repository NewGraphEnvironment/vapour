<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lightweight Access to the 'Geospatial Data Abstraction Library' ('GDAL') • vapour</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><meta property="og:title" content="Lightweight Access to the 'Geospatial Data Abstraction Library' ('GDAL')">
<meta property="og:description" content="Provides low-level access to 'GDAL' functionality for R packages. The aim is to minimize
  the level of interpretation put on the 'GDAL' facilities, to enable direct use of it for a variety of purposes. 
  'GDAL' is the 'Geospatial Data Abstraction Library' a translator for raster and vector geospatial data formats 
  that presents a single raster abstract data model and single vector abstract data model to the calling application 
  for all supported formats &lt;http://gdal.org/&gt;. Other available packages 'rgdal' and 'sf' also provide access to 
  the 'GDAL' library, but neither can be used for these lower level tasks, and both do many other tasks. ">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">vapour</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/vapour.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->

<div id="vapour" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#vapour" class="anchor"></a>vapour</h1></div>
<p>We aim to provide access to the basic functions available in GDAL, which loosely provides both a <a href="http://www.gdal.org/gdal_datamodel.html">raster</a> and a <a href="http://www.gdal.org/ogr_arch.html">vector</a> data model.</p>
<p>The workflows available are intended to support development of applications in R for these vector and <a href="https://en.wikipedia.org/wiki/Raster_data">raster data</a> without being constrained to any particular data model.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The package can be installed from Github.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"hypertidy/vapour"</span>)</a></code></pre></div>
<p>You will need development tools for building R packages.</p>
<p>On Linux and MacOS you’ll need an available GDAL installation, but on Windows the ROpenSci rwinlib tools are used and the required GDAL will be downloaded and compiled against when building the package.</p>
</div>
<div id="purpose" class="section level2">
<h2 class="hasAnchor">
<a href="#purpose" class="anchor"></a>Purpose</h2>
<p>The goal of vapour is to provide a basic <strong>GDAL API</strong> package for R. The priority is to give low-level access to key functionality, not comprehensive coverage of the library. There is only read-only facilities, and no conversion to specialist types in R. Ideally, this could become a common foundation for other packages to specialize, but at the very least provides minimal examples to use GDAL for specialist needs.</p>
<p>A parallel goal is to be freed from the powerful but sometimes limiting high-level data models of GDAL itself, specifically these are <em>simple features</em> and <em>affine-based regular rasters composed of 2D slices</em>. (GDAL will possibly remove these limitations over time but still there will always be value in having modularity in an ecosystem of tools. )</p>
<p>This partly draws on work done in <a href="https://github.com/r-spatial/sf">the sf package</a> and in packages <code>rgdal</code> and <code>rgdal2</code>. I’m amazed that something as powerful and general as GDAL is still only available through these lenses, but recentish improvements make things much easier touse and share. Specifically <code>Rcpp</code> means that access to external libs is simplified, easier to learn and easier to get started and make progress. The other part is that cross-platform support is now much better, with more consistency on the libraries available on the CRAN machines and in other contexts.</p>
<p>Examples of packages that use vapour are in development, <a href="https://github.com/mdsumner/RGDALSQL">RGDALSQL</a> and <a href="https://github.com/hypertidy/lazyraster">lazyraster</a>. <code>RGDALSQL</code> aims to leverage the facilities of GDAL to provide data <em>on-demand</em> for many sources <em>as if</em> they were databases. <code>lazyraster</code> uses the level-of-detail facility of GDAL to read just enough resolution from a raster source using traditional window techniques.</p>
</div>
</div>
<div id="gdal-for-data" class="section level1">
<h1 class="hasAnchor">
<a href="#gdal-for-data" class="anchor"></a>GDAL for data</h1>
<p>There are tools for reading from both vector and raster data sources.</p>
<div id="vector-data" class="section level2">
<h2 class="hasAnchor">
<a href="#vector-data" class="anchor"></a>Vector data</h2>
<ul>
<li>read attributes only</li>
<li>read geometry only</li>
<li>read geometry as raw binary, or various text forms</li>
<li>read geometry bounding box only</li>
<li>optionally, apply <a href="http://www.gdal.org/ogr_sql.html">OGRSQL</a> to a layer prior to above read calls</li>
</ul>
</div>
<div id="raster-data" class="section level2">
<h2 class="hasAnchor">
<a href="#raster-data" class="anchor"></a>Raster data</h2>
<ul>
<li>find structural metadata for a single raster source</li>
<li>find available single rasters within a complex source</li>
<li>read from a raster arbitrarily using GDAL very flexible <a href="http://www.gdal.org/classGDALRasterBand.html#a30786c81246455321e96d73047b8edf1">IO framework</a>.</li>
</ul>
<p>Limitations, work-in-progress and other discussion are active here: <a href="https://github.com/hypertidy/vapour/issues/4" class="uri">https://github.com/hypertidy/vapour/issues/4</a></p>
</div>
</div>
<div id="warnings" class="section level1">
<h1 class="hasAnchor">
<a href="#warnings" class="anchor"></a>Warnings</h1>
<p>It’s possible to give problematic “SELECT” statements via the <code>sql</code> argument. Note that the geometry readers <code>vapour_read_geometry</code>, <code>vapour_read_geometry_text</code>, and <code>vapour_read_extent</code> will strip out the <code>SELECT ... FROM</code> clause and replace it with <code>SELECT * FROM</code> to ensure that the geometry is accessible, though the attributes are ignored. This means we can allow the user or <code>dplyr</code> to create any <code>SELECT</code> statement. The function <code>vapour_read_geometry_what</code> will return a list of NULLs, in this case.</p>
<p>I haven’t tried this against a real database, I’m not sure if we need <code>AsBinary()</code> around EWKB geoms, for example - but at any rate these can be ingested by <code>sf</code>.</p>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<p>The package documentation page gives an overview of available functions.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">help</span>(<span class="st">"vapour-package"</span>)</a></code></pre></div>
<p>See the vignettes and documentation for examples.</p>
</div>
<div id="set-up" class="section level2">
<h2 class="hasAnchor">
<a href="#set-up" class="anchor"></a>Set up</h2>
<p>I’ve kept a record of a minimal GDAL wrapper package here:</p>
<p><a href="https://github.com/mdsumner/gdalmin" class="uri">https://github.com/mdsumner/gdalmin</a></p>
<p>This must be run when your function definitions change:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">tools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tools/topics/package_native_routine_registration_skeleton">package_native_routine_registration_skeleton</a></span>(<span class="st">"../vapour"</span>, <span class="st">"src/init.c"</span>,<span class="dt">character_only =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
</div>
<div id="context" class="section level2">
<h2 class="hasAnchor">
<a href="#context" class="anchor"></a>Context</h2>
<p>My first real attempt at DBI abstraction is here, this is still an aspect that is desperately needed in R to help bring tidyverse attention to spatial:</p>
<p><a href="https://github.com/mdsumner/RGDALSQL" class="uri">https://github.com/mdsumner/RGDALSQL</a></p>
<p>Before that I had worked on getting sp and dplyr to at least work together <a href="https://github.com/dis-organization/sp_dplyrexpt" class="uri">https://github.com/dis-organization/sp_dplyrexpt</a> and recently rgdal was updated to allow tibbles to be used, something that spbabel and spdplyr really needed to avoid friction.</p>
<p>Early exploration of allow non-geometry read with rgdal was tried here: <a href="https://github.com/r-gris/gladr" class="uri">https://github.com/r-gris/gladr</a></p>
<p>Big thanks to Edzer Pebesma and Roger Bivand and Tim Keitt for prior art that I crib and copy from. Jeroen Ooms helped the R community hugely by providing an automatable build process for libraries on Windows. Mark Padgham helped kick me over a huge obstacle in using C++ libraries with R. Simon Wotherspoon and Ben Raymond have endured my ravings about wanting this level of control for many years.</p>
</div>
</div>
<div id="code-of-conduct" class="section level1">
<h1 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of conduct</h1>
<p>Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="NA">NA</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Michael Sumner <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2471-7511" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/hypertidy/vapour"><img src="http://badges.herokuapp.com/travis/hypertidy/vapour?branch=master&amp;env=BUILD_NAME=trusty_clang&amp;label=trusty_clang" alt="Build Status"></a></li>
<li><a href="https://travis-ci.org/hypertidy/vapour"><img src="http://badges.herokuapp.com/travis/hypertidy/vapour?branch=master&amp;env=BUILD_NAME=osx&amp;label=osx" alt="Build Status"></a></li>
<li><a href="https://travis-ci.org/hypertidy/vapour"><img src="http://badges.herokuapp.com/travis/hypertidy/vapour?branch=master&amp;env=BUILD_NAME=mingw_w64&amp;label=mingw_w64" alt="Build Status"></a></li>
<li><a href="https://codecov.io/github/hypertidy/vapour?branch=master"><img src="https://img.shields.io/codecov/c/github/hypertidy/vapour/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://cran.r-project.org/package=vapour"><img src="http://www.r-pkg.org/badges/version/vapour" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michael Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>

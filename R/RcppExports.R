# Generated by using Rcpp::compileAttributes() -> do not edit by hand
# Generator token: 10BE3573-1514-4C36-9D1C-5A225CD40393

#' GDAL info
#'
#' @param pszFilename data source
#' @export
gdal_info <- function(pszFilename) {
    .Call('_vapour_gdal_info', PACKAGE = 'vapour', pszFilename)
}

#' Raster IO
#'
#' @param pszFilename data source
#' @export
#' @examples
#' f <- system.file("extdata", "sst.tif", package = "vapour")
#' raster_info(f)
raster_info <- function(pszFilename) {
    .Call('_vapour_raster_info', PACKAGE = 'vapour', pszFilename)
}

#' Raster IO (read)
#'
#' Read a window of data from a GDAL raster source. The first argument is the source
#' name and the second is a 6-element `window` of offset, source dimension, and output dimension.
#'
#' This is analgous to the `rgdal` function `readGDAL` with its arguments `offset`,  `region.dim`
#' and `output.dim`.
#' @param filename data source
#' @param band index of which band to read
#' @param window src_offset, src_dim, out_dim
#' @export
#' @examples
#' f <- system.file("extdata", "sst.tif", package = "vapour")
#' ## a 5*5 window from a 10*10 region
#' raster_io(f, window = c(0, 0, 10, 10, 5, 5))
#' ## find the information first
#' #ri <- raster_info(f)
#' #str(matrix(raster_io(f, c(0, 0, ri$dimXY, ri$dimXY)), ri$dimXY[1]))
#' ## the method can be used to up-sample as well
#' #str(matrix(raster_io(f, window = c(0, 0, 10, 10, 15, 25)), 15))
#' ## a future version will provide access to different methods
raster_io <- function(filename, window, band = 1L) {
    .Call('_vapour_raster_io', PACKAGE = 'vapour', filename, window, band)
}

#' Layer names
#'
#' Obtain the names of available layers from a GDAL vector source.
#' @inheritParams vapour_read_feature_what
#' @return character vector of layer names
#'
#' @examples
#' file <- "list_locality_postcode_meander_valley.tab"
#' mvfile <- system.file(file.path("extdata/tab", file), package="vapour")
#' vapour_layers(mvfile)
#' @export
vapour_layer_names <- function(dsource, sql = "") {
    .Call('_vapour_vapour_layer_names', PACKAGE = 'vapour', dsource, sql)
}

#' Vector attributes read
#'
#' Read layer attributes, optionally after SQL select
#' @param dsource data source name (path to file, connection string, URL)
#' @param layer integer of layer to work with, defaults to the first (0)
#' @param sql if not empty this is executed against the data source (layer will be ignored)
#' @examples
#' file <- "list_locality_postcode_meander_valley.tab"
#' mvfile <- system.file(file.path("extdata/tab", file), package="vapour")
#' vapour_read_attributes(mvfile)
#' sq <- "SELECT * FROM list_locality_postcode_meander_valley WHERE FID < 5"
#' att <- vapour_read_attributes(mvfile, sql = sq)
#' dsource <- "inst/extdata/tab/list_locality_postcode_meander_valley.tab"
#'
#' @export
vapour_read_attributes <- function(dsource, layer = 0L, sql = "") {
    .Call('_vapour_vapour_read_attributes', PACKAGE = 'vapour', dsource, layer, sql)
}

#' Read GDAL feature thing 'what'
#'
#' Read GDAL geometry as blob, text, or numeric extent.
#'
#' `vapour_read_feature_what` will read a feature in various ways, as binary WKB, various text formats, a numeric
#' extent, and for each an option SQL string will be evaluated against the data source before reading.
#' The extent is the native bounding box, the four numbers xmin, xmax, ymin, ymax.
#'
#' @param dsource data source
#' @param layer layer
#' @param sql sql
#' @param what what to read, "geometry", "text", "extent"
#' @param textformat indicate text output format, available are "json" (default), "gml", "kml", "wkt"
#' @examples
#' file <- "list_locality_postcode_meander_valley.tab"
#' mvfile <- system.file(file.path("extdata/tab", file), package="vapour")
#' #tib <- tibble::tibble(wkb = vapour_read_geometry(mvfile)) %>%
#' #  bind_cols(read_gdal_table(mvfile))
#' pfile <- system.file("extdata/point.shp", package = "vapour")
#' vapour_read_geometry(pfile)
#'
#' file <- "list_locality_postcode_meander_valley.tab"
#' mvfile <- system.file(file.path("extdata/tab", file), package="vapour")
#' vapour_read_geometry_text(mvfile)
#' pfile <- system.file("extdata/point.shp", package = "vapour")
#' vapour_read_geometry_text(pfile)
#'
#' file <- "list_locality_postcode_meander_valley.tab"
#' mvfile <- system.file(file.path("extdata/tab", file), package="vapour")
#' vapour_read_extent(mvfile)
#' @export
vapour_read_feature_what <- function(dsource, layer = 0L, sql = "", what = "geometry", textformat = "json") {
    .Call('_vapour_vapour_read_feature_what', PACKAGE = 'vapour', dsource, layer, sql, what, textformat)
}

